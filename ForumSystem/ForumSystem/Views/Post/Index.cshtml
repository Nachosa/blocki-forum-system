@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model List<ForumSystemDTO.ViewModels.PostViewModels.PostDetailsViewModel>

<h2>All Created Posts</h2>

<div>
	<form asp-controller="Post" asp-action="Index" method="get">
		<label for="filterBy">Filter By:</label>
		<input type="text" name="filterBy" value="@ViewBag.FilterBy" />
		<button type="submit">Filter</button>
	</form>
</div>

<div>
	<form asp-controller="Post" asp-action="Index" method="get">
		<label for="sortBy">Sort By:</label>
		<select name="sortBy">
			<option value="">-- Select Sorting Option --</option>
			<option value="title" selected="@(ViewBag.SortBy == "title")">Title</option>
			<option value="date" selected="@(ViewBag.SortBy == "date")">Date</option>
			<!-- Add more sorting options as needed -->
		</select>
		<button type="submit">Sort</button>
	</form>
</div>

@if (Model != null && Model.Count > 0)
{
	<table class="custom-table">
		<thead class="custom-table">
			<tr class="custom-table">
				<th>Title</th>
				<th>Author</th>
				<th>Comments</th>
				<th>Created On</th>
				<th>Likes</th>
				<th>Tags</th>
			</tr>
		</thead>
		<tbody class="custom-table">
			@foreach (var post in Model)
			{
				<tr>
					<td class="table-hyperlink"><a asp-controller="Post" asp-action="PostDetails" asp-route-id="@post.PostId">@post.Title</a></td>
					<td class="table-hyperlink"><a asp-controller="User" asp-action="UserDetails" asp-route-id="@post.User.Id">@post.User.Username</a></td>
					<td>@post.Comments.Count</td>
					<td>@post.CreatedOn</td>
					<td>@post.LikesCount</td>
					<td>@(post.Tags.Any() ? string.Join(", ", post.Tags) : "none")</td>
				</tr>
			}
		</tbody>
	</table>
}
else
{
    <p>No posts found.</p>
}